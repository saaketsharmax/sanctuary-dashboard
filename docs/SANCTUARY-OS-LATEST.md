# Sanctuary OS — Platform Architecture & Agent Ecosystem

**Version:** 5.0
**Date:** February 27, 2026
**Status:** Active Development — Full Agent Mesh Operational

---

## What Sanctuary OS Is

Sanctuary OS is an **AI-native startup accelerator platform** that replaces human intuition with evidence-based, continuously-improving AI agents. Every stage of the accelerator — from application to exit — is powered by specialized agents that learn from every interaction.

**This is not a tool. It is an operating system for accelerators.**

---

## The Agent Mesh

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    SANCTUARY OS — AGENT MESH (v5.0)                     │
└─────────────────────────────────────────────────────────────────────────┘

  INTAKE LAYER                    ANALYSIS LAYER                 ACTION LAYER
  ─────────────                   ──────────────                 ────────────
  ┌──────────────┐               ┌──────────────┐              ┌──────────────┐
  │  Application │               │  Assessment  │              │  Decision    │
  │  Form        │──────────────►│  Agent       │──────────┐   │  Engine      │
  └──────────────┘               └──────────────┘          │   └──────┬───────┘
                                                           │          │
  ┌──────────────┐               ┌──────────────┐          │   ┌──────▼───────┐
  │  Voice       │               │  Research    │          ├──►│  Startup     │
  │  Interview   │──────────────►│  Agent       │──────┐   │   │  Auto-Create │
  │  Agent       │               └──────────────┘      │   │   └──────┬───────┘
  │  (ElevenLabs)│                                     │   │          │
  └──────────────┘               ┌──────────────┐      │   │   ┌──────▼───────┐
        │                        │  Memo        │◄─────┘   │   │  Investment  │
        │                        │  Generator   │          │   │  Allocation  │
        │                        └──────────────┘          │   │  ($50k+$50k) │
        │                                                  │   └──────────────┘
        │                                                  │
        │   DD LAYER (God Mode)                            │
        │   ───────────────────                            │
        │   ┌──────────────────────────────────────────┐   │
        │   │  ┌────────────┐  ┌────────────┐          │   │
        │   │  │  Claim     │  │  Claim     │          │   │
        │   │  │  Extraction│─►│  Verify    │          │   │
        │   │  └────────────┘  └────────────┘          │   │
        │   │  ┌────────────┐  ┌────────────┐          │   │
        │   │  │  Team      │  │  Market    │          │   │
        │   │  │  Assessment│  │  Assessment│          │   │
        │   │  └────────────┘  └────────────┘          │   │
        │   │  ┌────────────┐  ┌────────────┐          │   │
        │   │  │  Document  │  │  DD Report │          │───┘
        │   │  │  Verify    │  │  Generator │          │
        │   │  └────────────┘  └────────────┘          │
        │   │  ┌─────────────────────────────┐         │
        │   │  │  ★ GOD MODE DD AGENT ★      │         │
        │   │  │  Behavioral Fingerprint     │         │
        │   │  │  Signal Consistency Index   │         │
        │   │  │  Revenue Quality Score      │         │
        │   │  │  Capital Efficiency         │         │
        │   │  │  Network Effect Potential   │         │
        │   │  │  Moat Durability (12-36mo)  │         │
        │   │  │  Market Timing Index        │         │
        │   │  │  Contrarian Signals         │         │
        │   │  │  Pattern Matching           │         │
        │   │  └─────────────────────────────┘         │
        │   └──────────────────────────────────────────┘
        │
        │   POST-ACCEPTANCE LAYER
        │   ─────────────────────
        │   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐
        └──►│  Matchmaking │  │  Programme   │  │  Calibration │
            │  Agent       │  │  Agent       │  │  Engine      │
            │  6-dimension │  │  90-day plan │  │  Auto-adjust │
            │  scoring     │  │  milestones  │  │  weights     │
            └──────────────┘  └──────────────┘  └──────┬───────┘
                                                       │
                                                ┌──────▼───────┐
                                                │  DD Accuracy │
                                                │  Dashboard   │
                                                │  (59 tests)  │
                                                └──────────────┘
```

---

## Agent Inventory (18 Total)

### Intake Agents
| Agent | Status | Purpose |
|-------|--------|---------|
| **Interview Agent (Text)** | Live | 5-section structured interview via chat |
| **Voice Interview Agent** | Live | Eleven Labs voice-first interview with behavioral signals |

### Analysis Agents
| Agent | Status | Purpose |
|-------|--------|---------|
| **Assessment Agent** | Live | 4-dimension scoring (Founder/Problem/UserValue/Execution) |
| **Research Agent** | Live | Tavily-powered web research + founder validation |
| **Memo Generator** | Live | Investment memo synthesis from all data sources |

### Due Diligence Agents (Standard)
| Agent | Status | Purpose |
|-------|--------|---------|
| **Claim Extraction** | Live | Extract verifiable claims from all sources |
| **Claim Verification** | Live | Verify claims via Tavily + source credibility |
| **Document Verification** | Live | Cross-reference uploaded documents |
| **Team Assessment** | Live | Founder background enrichment + scoring |
| **Market Assessment** | Live | TAM validation + competitor mapping |
| **DD Report Generator** | Live | Hybrid deterministic + AI report |

### Due Diligence Agents (God Mode)
| Agent | Status | Purpose |
|-------|--------|---------|
| **God Mode DD Agent** | Live | 9 unique metrics traditional DD can't derive |
| **DD Accuracy Agent** | Live | Prediction tracking, confidence calibration, drift detection |

### Post-Acceptance Agents
| Agent | Status | Purpose |
|-------|--------|---------|
| **Matchmaking Agent** | Live | Deep mentor-startup and GP-startup matching |
| **Programme Agent** | Live | 90-day accelerator programme with milestones, KPIs, mentor triggers |
| **Calibration Engine** | Live | Self-improving learning loop — adjusts weights from feedback + outcomes |

### Meta Agents
| Agent | Status | Purpose |
|-------|--------|---------|
| **DD Accuracy Dashboard** | Live | System health visualization, drift detection, confidence calibration |

---

## God Mode DD — What Makes It Different

Traditional DD asks: **"Is what they claim true?"**
God Mode DD asks: **"What aren't they telling us, and what does how they say things reveal?"**

### 9 Unique Metrics

| Metric | What It Measures | Why Traditional DD Misses It |
|--------|-----------------|------------------------------|
| **Behavioral Fingerprint** | Confidence consistency, specificity, deflection patterns, emotional arc | Traditional DD only checks claims, not behavior |
| **Signal Consistency Index** | Cross-source claim consistency (app vs interview vs research vs docs) | Nobody compares what they wrote vs what they said |
| **Revenue Quality Score** | Concentration, expansion potential, churn prediction, organic vs paid | MRR is a number; quality is the insight |
| **Capital Efficiency Predictor** | Burn multiple, runway, team cost ratio vs benchmarks | Traditional DD looks at what IS, not what SHOULD BE |
| **Network Effect Potential** | Type, viral coefficient, data flywheel, switching costs | Requires product-level analysis, not financial |
| **Moat Durability** | Current + projected moat at 12/36 months, decay rate by type | Nobody projects moats forward — they measure snapshots |
| **Market Timing Index** | Tech readiness, regulatory, economic cycle, competitor activity, window | Timing analysis requires cross-referencing macro signals |
| **Contrarian Signals** | Unconventional strengths, hidden risks, non-obvious patterns | By definition, these are what everyone else overlooks |
| **Pattern Matching** | Archetype comparison, historical parallels, outlier factors | Requires a database of startup patterns to compare against |

### Composite Output
- **God Mode Score**: 0-100 weighted composite of all 9 metrics
- **Conviction Level**: strong_conviction_invest → strong_conviction_pass
- **Alpha Signals**: Top 3 insights traditional DD would completely miss
- **One Line Verdict**: The single most important thing about this startup
- **Memo Addendum**: 2-3 paragraphs added to the investment memo

---

## DD Accuracy Metrics

The DD system measures its own accuracy:

| Metric | Description | Target |
|--------|-------------|--------|
| **Overall Accuracy** | Prediction vs outcome correlation | >75% |
| **Confidence Calibration** | Are 85% confident predictions right 85%? | <10% error |
| **Partner Agreement Rate** | % where partner agrees with AI | >80% |
| **Score Drift** | Distribution shift over time | <8 points |
| **Signal Effectiveness** | Which signals actually predict outcomes | R² > 0.5 |
| **Claim Verification Accuracy** | Are verified claims actually true? | >85% |

---

## Voice Interview Agent

The interview shifts from text to voice-first using Eleven Labs:

- **Server-side**: Same 5-section structure, same signal extraction
- **Voice-specific signals**: Hesitation detection, speaking rate analysis, emotional tone
- **Concise responses**: <60 words per response (optimized for TTS)
- **Behavioral data**: Pause duration, speaking rate, STT confidence → feed into God Mode DD

### API
```
POST /api/interview/voice
Body: { transcribedText, voiceMetadata, session }
Response: { response, shouldTransition, isComplete, signals, voice: { config, emotion, pace } }
```

---

## Matchmaking Agent

Goes beyond keyword matching for mentor-startup pairing:

- **Need vs Want analysis**: Uses assessment + DD data to identify REAL needs
- **6 scoring dimensions**: Expertise (30%), Stage (25%), Industry (15%), Track Record (15%), Availability (10%), Personality (5%)
- **Anti-pattern detection**: Flags mismatches that look good on paper
- **Engagement format recommendation**: weekly/biweekly/monthly/project-based/on-demand
- **Gap analysis**: Identifies missing expertise in the marketplace

---

## Programme Agent

Generates tailored 90-day accelerator programmes on approval:

- **3 Phases**: Foundation (weeks 1-4), Acceleration (weeks 5-8), Launch Pad (weeks 9-12)
- **9 Milestones**: Each with KPI targets, mentor support needs, dependencies, success criteria
- **KPI targets derived from application data**: e.g., MRR target = 3x baseline at Demo Day
- **Mentor matching triggers**: Maps milestones to expertise needs with urgency levels
- **12-week check-in schedule**: Auto-generated with phase-appropriate focus areas

### API
```
POST /api/applications/[id]/programme   Generate programme
GET  /api/applications/[id]/programme   Retrieve existing programme
```

---

## Calibration Engine

Self-improving learning loop that makes the DD system smarter over time:

- **Prediction accuracy tracking**: Invest/pass verdicts vs actual outcomes
- **Confidence calibration**: Buckets at 50-60%, 60-70%, etc. — measures if 80% confidence = 80% correct
- **Partner alignment scoring**: Agreement rate + dimension-level override patterns
- **Drift detection**: Compares score distributions across time windows, alerts on shifts
- **Signal effectiveness ranking**: Which signals actually predict success (R² calculation)
- **Weight adjustment generation**: Proposes new scoring weights based on outcome data
- **Health score**: Composite 0-100 metric for overall system reliability

### API
```
GET  /api/applications/dd/calibration   Get latest calibration report
POST /api/applications/dd/calibration   Run calibration cycle
```

---

## Backend: Decision Flow

When a partner approves an application:
1. Application status → `approved`
2. Startup record auto-created with scores from assessment
3. Founder linked to startup (user.startup_id)
4. Investment allocated: $50k cash + $50k credits
5. All in one API call: `POST /api/applications/[id]/decision`

---

## API Surface

### Application Pipeline
```
POST   /api/applications                        Create application
GET    /api/applications                        List applications
POST   /api/applications/[id]/interview         Start/complete interview
POST   /api/interview/chat                      Text interview message
POST   /api/interview/voice                     Voice interview message
POST   /api/applications/[id]/assess            Trigger assessment
POST   /api/applications/[id]/decision          Approve/reject
POST   /api/applications/[id]/feedback          Partner feedback
GET    /api/applications/[id]/feedback          Get feedback
```

### Due Diligence
```
POST   /api/applications/[id]/dd               Run full DD pipeline
GET    /api/applications/[id]/dd               DD status + summary
GET    /api/applications/[id]/dd/claims        Filterable claims
GET    /api/applications/[id]/dd/report        DD report
POST   /api/applications/[id]/dd/report        Regenerate report
POST   /api/applications/[id]/dd/god-mode      Run God Mode DD
GET    /api/applications/[id]/dd/god-mode      Get God Mode report
GET    /api/applications/dd/accuracy           DD accuracy metrics
```

### Calibration & Learning
```
GET    /api/applications/dd/calibration         Latest calibration report
POST   /api/applications/dd/calibration         Run calibration cycle
```

### Post-Acceptance
```
POST   /api/applications/[id]/programme         Generate 90-day programme
GET    /api/applications/[id]/programme          Get programme
POST   /api/partner/matches/suggest             Run matchmaking
GET    /api/partner/matches/suggest              Get match suggestions
GET    /api/partner/investments                  Portfolio investments
GET    /api/partner/investments/[id]             Investment detail
```

---

## Tech Stack

| Layer | Technology |
|-------|-----------|
| Framework | Next.js 16, React 19, TypeScript |
| Styling | Tailwind CSS 4, Radix UI, shadcn/ui |
| Auth | Supabase Auth (email + OAuth) |
| Database | Supabase (PostgreSQL + RLS) |
| AI | Anthropic Claude (Sonnet 4), Vercel AI SDK |
| Research | Tavily API (web search + extraction) |
| Voice | Eleven Labs (TTS), client-side STT |
| Charts | Recharts |
| Deployment | Vercel |

---

## Database Migrations

| # | Name | Purpose |
|---|------|---------|
| 002 | enriched_metadata_schema | Metadata tables |
| 003 | research_and_memo_columns | Research/memo storage |
| 004 | founder_requests_and_feedback | Feedback system |
| 005 | due_diligence_schema | DD tables + claims + verifications |
| 006 | documents_storage_policies | Document RLS |
| 007 | investment_credits_schema | Investment tracking |
| 008 | realtime_investment_transactions | Realtime subscriptions |
| 009 | fix_application_status_constraint | Add approved/rejected statuses |
| 010 | dd_phase1_columns | Benchmark flags + source credibility |
| 011 | dd_phase2_team_market | Team/market assessment support |

---

## Test Coverage

- **59 tests** across 3 test suites (Vitest)
  - `dd-accuracy-agent.test.ts` — 18 tests: prediction accuracy, calibration, partner overrides, drift, claims
  - `calibration-engine.test.ts` — 20 tests: report generation, weight adjustments, health scoring, edge cases
  - `mock-agents.test.ts` — 21 tests: God Mode DD, Matchmaking, Programme agents (mock variants)

---

## What's Next

1. **Deploy migration 009** to unblock the full decision flow
2. **Deploy migration 012** for God Mode DD columns + calibration tables
3. **Design system migration** — cherry-pick `b7a5248` + `d709418` to re-apply
4. **Auth `gh` CLI** + create PR for `design-merge` → `main`
5. **Community + Marketing** apps in the monorepo
6. **Real-time programme tracking** — progress updates as milestones complete
7. **Mentor matching execution** — auto-trigger matching when milestones need support

---

*Sanctuary OS — The accelerator that gets smarter with every founder it meets.*
